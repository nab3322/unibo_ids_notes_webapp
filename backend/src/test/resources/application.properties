mkdir -p backend/src/test/resources
cat > backend/src/test/resources/application.properties << 'EOF'
# Database H2
quarkus.datasource.db-kind=h2
quarkus.datasource.jdbc.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;MODE=PostgreSQL
quarkus.datasource.username=sa
quarkus.datasource.password=

# Hibernate
quarkus.hibernate-orm.database.generation=drop-and-create
quarkus.hibernate-orm.log.sql=false
quarkus.hibernate-orm.dialect=org.hibernate.dialect.H2Dialect

# JWT
mp.jwt.verify.publickey.location=publicKey.pem
smallrye.jwt.sign.key.location=privateKey.pem
mp.jwt.verify.issuer=https://notes-app.com
quarkus.smallrye-jwt.enabled=true

# LOGGING COMPLETO
quarkus.log.level=INFO
quarkus.log.category."com.unibo.notes".level=DEBUG
quarkus.log.category."io.quarkus".level=INFO
quarkus.log.console.enable=true

# Log errori JWT e security
quarkus.log.category."io.smallrye.jwt".level=DEBUG
quarkus.log.category."io.quarkus.security".level=DEBUG
quarkus.log.category."org.jose4j".level=DEBUG

# Mostra stack trace completo
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n
quarkus.resteasy-reactive.path=/api
